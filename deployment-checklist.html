<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deployment Checklist</title>
    <style>
        @media print {
            .no-print { display: none; }
            body { background: white; }
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        h1 {
            color: #0066cc;
            text-align: center;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
        }
        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #0066cc;
        }
        .section h2 {
            color: #0066cc;
            margin-top: 0;
            font-size: 20px;
        }
        .checklist {
            list-style: none;
            padding: 0;
        }
        .checklist li {
            padding: 12px;
            margin: 8px 0;
            background: white;
            border-radius: 5px;
            border: 2px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            padding-left: 45px;
        }
        .checklist li:hover {
            border-color: #0066cc;
            transform: translateX(5px);
        }
        .checklist li.checked {
            background: #d4edda;
            border-color: #28a745;
            text-decoration: line-through;
            opacity: 0.7;
        }
        .checklist li::before {
            content: '‚òê';
            position: absolute;
            left: 15px;
            font-size: 20px;
            color: #666;
        }
        .checklist li.checked::before {
            content: '‚òë';
            color: #28a745;
        }
        .code {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 10px 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            margin: 10px 0;
        }
        .btn {
            display: inline-block;
            padding: 10px 20px;
            background: #0066cc;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            margin: 5px;
            font-weight: bold;
            border: none;
            cursor: pointer;
        }
        .btn:hover {
            background: #0052a3;
        }
        .btn-success {
            background: #28a745;
        }
        .btn-success:hover {
            background: #218838;
        }
        .btn-warning {
            background: #ffc107;
            color: #333;
        }
        .btn-warning:hover {
            background: #e0a800;
        }
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #0066cc 0%, #00c6ff 100%);
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        .alert {
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .button-group {
            text-align: center;
            margin: 30px 0;
        }
        .time-estimate {
            display: inline-block;
            background: #fff3cd;
            color: #856404;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Firebase Functions Deployment Checklist</h1>
        <p class="subtitle">Follow these steps to deploy automated report scheduling</p>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progressBar" style="width: 0%">0%</div>
        </div>
        
        <div class="alert alert-info">
            <strong>üìù Instructions:</strong> Click each item when completed. Your progress is saved automatically!
        </div>
        
        <!-- Phase 1 -->
        <div class="section">
            <h2>Phase 1: Prerequisites <span class="time-estimate">‚è±Ô∏è 2 minutes</span></h2>
            <ul class="checklist" data-phase="1">
                <li data-item="1">Open PowerShell as Administrator</li>
                <li data-item="2">Run: <code>npm install -g firebase-tools</code></li>
                <li data-item="3">Verify installation: <code>firebase --version</code></li>
            </ul>
        </div>
        
        <!-- Phase 2 -->
        <div class="section">
            <h2>Phase 2: Firebase Authentication <span class="time-estimate">‚è±Ô∏è 1 minute</span></h2>
            <ul class="checklist" data-phase="2">
                <li data-item="4">Run: <code>firebase login</code></li>
                <li data-item="5">Login with Google account in browser</li>
                <li data-item="6">Verify: See "Success! Logged in as..." message</li>
            </ul>
        </div>
        
        <!-- Phase 3 -->
        <div class="section">
            <h2>Phase 3: Deploy Functions <span class="time-estimate">‚è±Ô∏è 3-5 minutes</span></h2>
            <ul class="checklist" data-phase="3">
                <li data-item="7">Double-click <code>deploy-functions.bat</code> in project folder</li>
                <li data-item="8">Wait for "Installing dependencies..." to complete</li>
                <li data-item="9">Wait for "Deploying functions..." to complete</li>
                <li data-item="10">Verify: See "‚úî Deploy complete!" message</li>
                <li data-item="11">Note: If errors occur, check logs and retry</li>
            </ul>
        </div>
        
        <!-- Phase 4 -->
        <div class="section">
            <h2>Phase 4: EmailJS Template <span class="time-estimate">‚è±Ô∏è 5 minutes</span></h2>
            <ul class="checklist" data-phase="4">
                <li data-item="12">Open <code>emailjs-template-guide.html</code> in browser</li>
                <li data-item="13">Go to EmailJS Dashboard (link in guide)</li>
                <li data-item="14">Create new template: <code>template_reports</code></li>
                <li data-item="15">Add all 6 variables (to_email, subject, etc.)</li>
                <li data-item="16">Copy HTML template from guide</li>
                <li data-item="17">Set subject line to: <code>{{subject}}</code></li>
                <li data-item="18">Save template</li>
                <li data-item="19">Send test email and verify receipt</li>
            </ul>
        </div>
        
        <!-- Phase 5 -->
        <div class="section">
            <h2>Phase 5: Testing <span class="time-estimate">‚è±Ô∏è 5 minutes</span></h2>
            <ul class="checklist" data-phase="5">
                <li data-item="20">Open <code>test-functions.html</code> in browser</li>
                <li data-item="21">Click "Check Connection" - should see ‚úÖ</li>
                <li data-item="22">Create test schedule (2 minutes from now)</li>
                <li data-item="23">Wait 2 minutes</li>
                <li data-item="24">Check email inbox and verify receipt</li>
            </ul>
        </div>
        
        <!-- Phase 6 -->
        <div class="section">
            <h2>Phase 6: Production Test <span class="time-estimate">‚è±Ô∏è 3 minutes</span></h2>
            <ul class="checklist" data-phase="6">
                <li data-item="25">Open <code>fueldist.html</code> in browser</li>
                <li data-item="26">Create an analysis (or use existing)</li>
                <li data-item="27">Click "Preview" button</li>
                <li data-item="28">Click "SAVE SCHEDULE" button</li>
                <li data-item="29">Set schedule time (2 minutes from now)</li>
                <li data-item="30">Enter your email address</li>
                <li data-item="31">Click "Save Schedule"</li>
                <li data-item="32">Wait 2 minutes and check email</li>
            </ul>
        </div>
        
        <!-- Phase 7 -->
        <div class="section">
            <h2>Phase 7: Monitoring <span class="time-estimate">‚è±Ô∏è 2 minutes</span></h2>
            <ul class="checklist" data-phase="7">
                <li data-item="33">Run: <code>firebase functions:log</code></li>
                <li data-item="34">Check for any error messages</li>
                <li data-item="35">Open Firebase Console: <a href="https://console.firebase.google.com/project/users-8be65/functions" target="_blank">View Console</a></li>
                <li data-item="36">Verify all 3 functions are deployed</li>
                <li data-item="37">Check execution count is increasing</li>
            </ul>
        </div>
        
        <!-- Phase 8 -->
        <div class="section">
            <h2>Phase 8: Final Checks <span class="time-estimate">‚è±Ô∏è 1 minute</span></h2>
            <ul class="checklist" data-phase="8">
                <li data-item="38">Verify recurring reports reschedule correctly</li>
                <li data-item="39">Confirm database rules are deployed</li>
                <li data-item="40">Document deployment date and version</li>
                <li data-item="41">Notify team about new feature</li>
            </ul>
        </div>
        
        <div id="completionAlert" style="display: none;" class="alert alert-success">
            <h3>üéâ Congratulations!</h3>
            <p><strong>All steps completed!</strong> Your automated report scheduling system is now live and running.</p>
            <p><strong>What happens next:</strong></p>
            <ul>
                <li>Cloud Functions check for scheduled reports every minute</li>
                <li>Reports are sent automatically at scheduled times</li>
                <li>Recurring reports reschedule automatically</li>
                <li>Old reports are cleaned up after 30 days</li>
            </ul>
            <p><strong>Monitoring:</strong> Run <code>firebase functions:log</code> to view logs</p>
        </div>
        
        <div class="button-group no-print">
            <button class="btn btn-warning" onclick="resetChecklist()">üîÑ Reset Checklist</button>
            <button class="btn" onclick="window.print()">üñ®Ô∏è Print Checklist</button>
            <button class="btn btn-success" onclick="openDocs()">üìö View Docs</button>
        </div>
        
        <div class="section no-print" style="margin-top: 40px; background: #fff3cd; border-left-color: #ffc107;">
            <h2>üìö Quick Reference</h2>
            <p><strong>Key Files:</strong></p>
            <ul>
                <li><code>deploy-functions.bat</code> - Deploy Cloud Functions</li>
                <li><code>emailjs-template-guide.html</code> - EmailJS setup</li>
                <li><code>test-functions.html</code> - Testing console</li>
                <li><code>README_DEPLOYMENT.md</code> - Full documentation</li>
            </ul>
            <p><strong>Key Commands:</strong></p>
            <div class="code">
firebase login<br>
firebase deploy --only functions<br>
firebase functions:log
            </div>
        </div>
    </div>
    
    <script>
        // Load saved progress
        function loadProgress() {
            const saved = localStorage.getItem('deploymentProgress');
            if (saved) {
                const items = JSON.parse(saved);
                items.forEach(itemId => {
                    const item = document.querySelector(`[data-item="${itemId}"]`);
                    if (item) item.classList.add('checked');
                });
            }
            updateProgress();
        }
        
        // Save progress
        function saveProgress() {
            const checked = Array.from(document.querySelectorAll('.checklist li.checked'))
                .map(el => el.getAttribute('data-item'));
            localStorage.setItem('deploymentProgress', JSON.stringify(checked));
        }
        
        // Update progress bar
        function updateProgress() {
            const total = document.querySelectorAll('.checklist li').length;
            const checked = document.querySelectorAll('.checklist li.checked').length;
            const percent = Math.round((checked / total) * 100);
            
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = percent + '%';
            progressBar.textContent = percent + '%';
            
            // Show completion alert
            if (percent === 100) {
                document.getElementById('completionAlert').style.display = 'block';
            } else {
                document.getElementById('completionAlert').style.display = 'none';
            }
        }
        
        // Handle clicks
        document.querySelectorAll('.checklist li').forEach(item => {
            item.addEventListener('click', function() {
                this.classList.toggle('checked');
                saveProgress();
                updateProgress();
            });
        });
        
        // Reset checklist
        function resetChecklist() {
            if (confirm('Are you sure you want to reset all progress?')) {
                document.querySelectorAll('.checklist li').forEach(item => {
                    item.classList.remove('checked');
                });
                localStorage.removeItem('deploymentProgress');
                updateProgress();
            }
        }
        
        // Open documentation
        function openDocs() {
            window.open('README_DEPLOYMENT.md', '_blank');
        }
        
        // Initialize
        loadProgress();
    </script>
</body>
</html>
