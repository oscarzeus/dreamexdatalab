<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Company Registration & Setup - Dreamex DataLab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Add Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <!-- Add Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Poppins', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                    },
                }
            }
        }
    </script>
    <style>
        html {
            scroll-behavior: smooth;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #0369a1 0%, #0ea5e9 100%);
        }
        
        .nav-link {
            position: relative;
        }
        
        .nav-link::after {
            content: "";
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -4px;
            left: 0;
            background-color: #0ea5e9;
            transition: width 0.3s;
        }
        
        .nav-link:hover::after {
            width: 100%;
        }

        
        /* Wizard Container Styles */
        .wizard-container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            max-width: 900px;
            width: 100%;
            margin: 2rem auto;
            padding: 0;
            overflow: hidden;
            position: relative;
        }

        .wizard-header {
            background: linear-gradient(135deg, #0369a1 0%, #0ea5e9 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .wizard-header h1 {
            margin: 0 0 0.5rem 0;
            font-size: 2rem;
            font-weight: 700;
        }

        .wizard-header p {
            margin: 0;
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .wizard-content {
            padding: 2rem;
        }

        /* Progress Indicator */
        .progress-section {
            margin-bottom: 2rem;
        }

        .progress-bar {
            background: #e5e7eb;
            border-radius: 10px;
            height: 8px;
            margin-bottom: 1rem;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #0369a1, #0ea5e9);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .step-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            position: relative;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e5e7eb;
            color: #6b7280;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
            position: relative;
            z-index: 2;
        }

        .step-circle.active {
            background: #0ea5e9;
            color: white;
        }

        .step-circle.completed {
            background: #10b981;
            color: white;
        }

        .step-title {
            font-size: 0.75rem;
            text-align: center;
            color: #6b7280;
            font-weight: 500;
        }

        .step-item.active .step-title {
            color: #0ea5e9;
            font-weight: 600;
        }

        .step-item.completed .step-title {
            color: #10b981;
            font-weight: 600;
        }

        .step-connector {
            position: absolute;
            top: 20px;
            left: 50%;
            right: -50%;
            height: 2px;
            background: #e5e7eb;
            z-index: 1;
        }

        .step-item:last-child .step-connector {
            display: none;
        }

        .step-connector.completed {
            background: #10b981;
        }

        /* Step Content */
        .wizard-step {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .wizard-step.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-content-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .step-content-header h2 {
            color: #374151;
            margin-bottom: 0.5rem;
            font-size: 1.5rem;
        }

        .step-content-header p {
            color: #6b7280;
            margin: 0;
        }

        /* Form Styling */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #374151;
        }

        .form-group label.required::after {
            content: " *";
            color: #ef4444;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-sizing: border-box;
            background-color: #fff;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #0ea5e9;
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
        }

        .form-hint {
            font-size: 0.875rem;
            color: #6b7280;
            margin-top: 0.25rem;
        }

        .form-error {
            color: #ef4444;
            font-size: 0.875rem;
            margin-top: 0.25rem;
            display: none;
        }

        .form-group.error input,
        .form-group.error select,
        .form-group.error textarea {
            border-color: #ef4444;
        }

        .form-group.error .form-error {
            display: block;
        }

        /* Role Selection Styling */
        #adminRole option[value="administrator"] {
            font-weight: bold;
            color: #ffd700;
            background-color: rgba(255, 215, 0, 0.1);
        }

        /* Plan Selection */
        .plan-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            margin: 2rem 0;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .plan-card {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            background: white;
        }

        .plan-card:hover {
            border-color: #0ea5e9;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(14, 165, 233, 0.15);
        }

        .plan-card.selected {
            border-color: #0ea5e9;
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.05) 0%, rgba(3, 105, 161, 0.05) 100%);
        }

        .plan-card.selected::before {
            content: "âœ“";
            position: absolute;
            top: -10px;
            right: -10px;
            background: #10b981;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.875rem;
        }

        .plan-name {
            font-size: 1.25rem;
            font-weight: 700;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        .plan-price {
            font-size: 2rem;
            font-weight: 700;
            color: #0ea5e9;
            margin-bottom: 1rem;
        }

        .plan-features {
            text-align: left;
            margin: 1rem 0;
        }

        .plan-features li {
            margin-bottom: 0.5rem;
            color: #6b7280;
        }

        .plan-features li::before {
            content: "âœ“";
            color: #28a745;
            font-weight: bold;
            margin-right: 0.5rem;
        }

        /* Feature Cards */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .feature-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            transition: transform 0.3s ease;
            border: 1px solid #e9ecef;
        }

        .feature-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .feature-card.module-card {
            cursor: pointer;
            border: 2px solid #e9ecef;
        }

        .feature-card.module-card:hover {
            border-color: #667eea;
        }

        .feature-card.module-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
        }

        .feature-card.module-card.selected::before {
            content: "âœ“";
            position: absolute;
            top: -10px;
            right: -10px;
            background: #28a745;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.875rem;
        }

        .feature-icon {
            font-size: 2.5rem;
            color: #667eea;
            margin-bottom: 1rem;
        }

        .feature-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .feature-description {
            color: #6c757d;
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 0.75rem;
        }

        .feature-price {
            font-size: 0.8rem;
            font-weight: 600;
            color: #0ea5e9;
            margin-top: 0.5rem;
            padding: 0.25rem 0.5rem;
            background: rgba(14, 165, 233, 0.1);
            border-radius: 4px;
            display: inline-block;
        }

        .feature-category {
            font-size: 0.7rem;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 0.5rem;
            opacity: 0.8;
        }

        /* Loading animation for features */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Module Selection */
        .module-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .module-card {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .module-card:hover {
            border-color: #0ea5e9;
        }

        .module-card.selected {
            border-color: #0ea5e9;
            background: rgba(14, 165, 233, 0.1);
        }

        .module-icon {
            font-size: 1.5rem;
            color: #0ea5e9;
            margin-bottom: 0.5rem;
        }

        .module-name {
            font-weight: 600;
            color: #374151;
            font-size: 0.9rem;
        }

        /* Domain Management */
        .domain-list {
            margin-top: 1rem;
        }

        .domain-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem 0.75rem;
            background: #f8f9fa;
            border-radius: 6px;
            margin-bottom: 0.5rem;
        }

        .domain-item button {
            background: none;
            border: none;
            color: #dc3545;
            cursor: pointer;
            font-size: 0.875rem;
        }

        /* User Count Section */
        #userCountSection input[type="number"] {
            appearance: textfield;
            -moz-appearance: textfield;
        }

        #userCountSection input[type="number"]::-webkit-outer-spin-button,
        #userCountSection input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        #userCountSection input[type="number"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        /* Navigation Buttons */
        .wizard-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid #e9ecef;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #0369a1 0%, #0ea5e9 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid #0ea5e9;
            color: #0ea5e9;
        }

        .btn-outline:hover {
            background: #0ea5e9;
            color: white;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Success/Completion Step */
        .completion-content {
            text-align: center;
            padding: 2rem 0;
        }

        .completion-icon {
            font-size: 4rem;
            color: #10b981;
            margin-bottom: 1rem;
        }

        .completion-title {
            font-size: 1.5rem;
            color: #374151;
            margin-bottom: 1rem;
        }

        .completion-description {
            color: #6b7280;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        /* Loading States */
        .loading {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .spinner {
            width: 16px;
            height: 16px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .wizard-container {
                margin: 10px;
                border-radius: 12px;
            }

            .wizard-content {
                padding: 1.5rem;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .plan-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
                max-width: 400px;
            }

            .feature-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .step-indicator {
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .step-item {
                min-width: 60px;
            }

            .step-title {
                font-size: 0.7rem;
            }

            .wizard-navigation {
                flex-direction: column;
                gap: 1rem;
            }

        }

        @media (max-width: 480px) {
            .wizard-header {
                padding: 1.5rem;
            }

            .wizard-header h1 {
                font-size: 1.5rem;
            }

            .step-circle {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }

            .step-connector {
                top: 15px;
            }

            .plan-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
                max-width: 350px;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <!-- GitHub Pages Fix Script -->
    <script src="github-pages-fix.js"></script>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">
    <!-- Header -->
    <header class="bg-white shadow-md p-4 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center">
                <div class="text-primary-600 mr-2">
                    <i class="fas fa-chart-line text-3xl"></i>
                </div>
                <h1 class="text-2xl font-bold text-primary-700">Dreamex DataLab</h1>
            </div>
            <nav class="hidden md:flex space-x-8 items-center">
                <a href="index.html#features" class="nav-link text-gray-700 hover:text-primary-600 font-medium text-base">Features</a>
                <a href="pricing.html" class="nav-link text-gray-700 hover:text-primary-600 font-medium text-base">Pricing</a>
                <a href="index.html#about" class="nav-link text-gray-700 hover:text-primary-600 font-medium text-base">About Us</a>
                <a href="index.html#contact" class="nav-link text-gray-700 hover:text-primary-600 font-medium text-base">Contact</a>
                <div class="flex items-center">
                    <div id="userStatus" class="hidden items-center mr-4">
                        <i class="fas fa-user-circle text-primary-600 mr-2"></i>
                        <span id="username" class="text-gray-700 font-medium"></span>
                    </div>
                    <a href="login.html" id="loginButton" class="px-6 py-1.5 bg-primary-600 text-white font-medium rounded-full hover:bg-primary-700 transition duration-300">Login</a>
                    <button id="logoutButton" class="hidden px-6 py-1.5 bg-gray-600 text-white font-medium rounded-full hover:bg-gray-700 transition duration-300 ml-2">Logout</button>
                </div>
            </nav>
            <button class="md:hidden text-gray-700">
                <i class="fas fa-bars text-xl"></i>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="py-8">
        <div class="wizard-container">
            <!-- Header -->
            <div class="wizard-header">
                <h1>Company Registration & Setup</h1>
                <p>Complete your company registration and configure your HSE management system</p>
            </div>

            <!-- Content -->
            <div class="wizard-content">
            <!-- Progress Section -->
            <div class="progress-section">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="step-indicator" id="stepIndicator">
                    <div class="step-item active">
                        <div class="step-circle">1</div>
                        <div class="step-title">Welcome</div>
                        <div class="step-connector"></div>
                    </div>
                    <div class="step-item">
                        <div class="step-circle">2</div>
                        <div class="step-title">Company Info</div>
                        <div class="step-connector"></div>
                    </div>
                    <div class="step-item">
                        <div class="step-circle">3</div>
                        <div class="step-title">Contact & Billing</div>
                        <div class="step-connector"></div>
                    </div>
                    <div class="step-item">
                        <div class="step-circle">4</div>
                        <div class="step-title">Admin Account</div>
                        <div class="step-connector"></div>
                    </div>
                    <div class="step-item">
                        <div class="step-circle">5</div>
                        <div class="step-title">Complete</div>
                    </div>
                </div>
            </div>

            <!-- Step 1: Welcome & Platform Features -->
            <div class="wizard-step active" id="step1">
                <div class="step-content-header">
                    <h2>Welcome to Dreamex Datalab</h2>
                    <p>Your comprehensive enterprise management platform</p>
                </div>

                <!-- Platform Features Selection -->
                <div style="margin-bottom: 3rem;">
                    <h3 style="text-align: center; color: #2c3e50; margin-bottom: 1rem; font-size: 1.3rem;">Select Platform Features</h3>
                    <p style="text-align: center; color: #6c757d; margin-bottom: 2rem;">Choose the features your organization needs (you must select at least one to proceed)</p>
                    
                    <!-- Features Loading State -->
                    <div id="featuresLoadingState" style="text-align: center; padding: 2rem; display: block;">
                        <div style="display: inline-block; width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid #0ea5e9; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                        <p style="margin-top: 1rem; color: #6c757d;">Loading platform features...</p>
                    </div>
                    
                    <!-- Dynamic Features Grid -->
                    <div id="platformFeaturesGrid" class="feature-grid" style="display: none;">
                        <!-- Features will be dynamically loaded here -->
                    </div>

                    <!-- Features Empty State -->
                    <div id="featuresEmptyState" style="text-align: center; padding: 2rem; display: none;">
                        <div style="color: #9ca3af; margin-bottom: 1rem;">
                            <i class="fas fa-puzzle-piece" style="font-size: 3rem;"></i>
                        </div>
                        <h4 style="color: #6c757d; margin-bottom: 0.5rem;">No Features Available</h4>
                        <p style="color: #9ca3af; margin: 0; font-size: 0.9rem;">Platform features are currently being configured. Please check back later.</p>
                    </div>

                    <div id="featureSelectionSummary" style="margin-top: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; display: none;">
                        <h4 style="margin-top: 0; color: #2c3e50;">Selected Features: <span id="selectedFeaturesCount">0</span></h4>
                        <div id="selectedFeaturesList" style="color: #6c757d; font-size: 0.9rem;"></div>
                        <div id="totalPrice" style="margin-top: 0.5rem; font-weight: 600; color: #0ea5e9; font-size: 1rem;">Total: $0.00/user/month</div>
                    </div>
                </div>

                <!-- Pricing Plans Section -->
                <div id="pricingSection" style="margin-bottom: 3rem; opacity: 0.5; pointer-events: none;">
                    <h3 style="text-align: center; color: #2c3e50; margin-bottom: 1rem; font-size: 1.3rem;">Choose Your Plan</h3>
                    <p style="text-align: center; color: #6c757d; margin-bottom: 2rem;">Select features above to view pricing options</p>
                    <div class="plan-grid">
                        <div class="plan-card" data-plan="free">
                            <div class="plan-name">Free Trial</div>
                            <div class="plan-price" id="freePrice">$0<span style="font-size: 1rem; font-weight: normal;">/15 days</span></div>
                            <ul class="plan-features">
                                <li>Up to 5 users</li>
                                <li>All selected features included</li>
                                <li>Standard reporting</li>
                                <li>Email support</li>
                                <li>Mobile access</li>
                                <li>15-day trial period</li>
                            </ul>
                        </div>
                        <div class="plan-card" data-plan="enterprise">
                            <div class="plan-name">Enterprise</div>
                            <div class="plan-price" id="enterprisePrice">$25<span style="font-size: 1rem; font-weight: normal;">/user/month</span></div>
                            <ul class="plan-features">
                                <li>Unlimited users</li>
                                <li>All selected features included</li>
                                <li>Advanced analytics & reporting</li>
                                <li>Custom integrations</li>
                                <li>24/7 dedicated support</li>
                                <li>Advanced security</li>
                                <li>API access</li>
                                <li>On-premise option available</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- User Count Section (for Enterprise plan) -->
                <div id="userCountSection" style="margin-bottom: 2rem; display: none;">
                    <div style="text-align: center; background: #f8f9fa; padding: 1.5rem; border-radius: 8px; border: 2px solid #667eea;">
                        <h4 style="margin-top: 0; color: #2c3e50;">Number of Users</h4>
                        <p style="color: #6c757d; margin-bottom: 1rem; font-size: 0.9rem;">Specify how many users will use the platform</p>
                        <div style="display: flex; align-items: center; justify-content: center; gap: 1rem; flex-wrap: wrap;">
                            <label for="userCount" style="font-weight: 600; color: #495057;">Users:</label>
                            <input type="number" id="userCount" min="1" max="10000" value="1" 
                                   style="width: 100px; padding: 0.5rem; border: 2px solid #ced4da; border-radius: 4px; text-align: center; font-size: 1rem; font-weight: 600;">
                        </div>
                        <div id="totalPriceDisplay" style="margin-top: 1rem; font-size: 1.2rem; font-weight: 600; color: #667eea;">
                            Total: $25/month
                        </div>
                        <div id="priceBreakdownDisplay" style="margin-top: 0.5rem; font-size: 0.9rem; color: #6c757d;"></div>
                    </div>
                </div>
            </div>

            <!-- Step 2: Company Information -->
            <div class="wizard-step" id="step2">
                <div class="step-content-header">
                    <h2>Company Information</h2>
                    <p>Tell us about your organization</p>
                </div>

                <form id="companyInfoForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="companyName" class="required">Company Name</label>
                            <input type="text" id="companyName" name="companyName" required>
                            <div class="form-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="companyRegistration" class="required">Registration Number</label>
                            <input type="text" id="companyRegistration" name="companyRegistration" required>
                            <div class="form-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="industry" class="required">Industry</label>
                            <select id="industry" name="industry" required>
                                <option value="">Select Industry</option>
                                <option value="manufacturing">Manufacturing</option>
                                <option value="construction">Construction</option>
                                <option value="oil-gas">Oil & Gas</option>
                                <option value="mining">Mining</option>
                                <option value="logistics">Logistics</option>
                                <option value="healthcare">Healthcare</option>
                                <option value="other">Other</option>
                            </select>
                            <div class="form-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="companySize" class="required">Company Size</label>
                            <select id="companySize" name="companySize" required>
                                <option value="">Select Size</option>
                                <option value="1-10">1-10 employees</option>
                                <option value="11-50">11-50 employees</option>
                                <option value="51-200">51-200 employees</option>
                                <option value="201-1000">201-1000 employees</option>
                                <option value="1000+">1000+ employees</option>
                            </select>
                            <div class="form-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="website">Company Website</label>
                            <input type="url" id="website" name="website" placeholder="https://www.example.com">
                            <div class="form-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="country" class="required">Country</label>
                            <select id="country" name="country" required>
                                <option value="">Select Country</option>
                                <option value="US">United States</option>
                                <option value="CA">Canada</option>
                                <option value="GB">United Kingdom</option>
                                <option value="AU">Australia</option>
                                <option value="DE">Germany</option>
                                <option value="FR">France</option>
                                <option value="JP">Japan</option>
                                <option value="OTHER">Other</option>
                            </select>
                            <div class="form-error"></div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="address">Company Address</label>
                        <textarea id="address" name="address" rows="3" placeholder="Enter your complete company address"></textarea>
                        <div class="form-error"></div>
                    </div>
                </form>
            </div>

            <!-- Step 3: Contact & Billing Information -->
            <div class="wizard-step" id="step3">
                <div class="step-content-header">
                    <h2>Contact & Billing Information</h2>
                    <p>Provide contact details and billing information</p>
                </div>

                <form id="contactBillingForm">
                    <h3 style="color: #2c3e50; margin-bottom: 1rem;">Primary Contact</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="contactName" class="required">Contact Name</label>
                            <input type="text" id="contactName" name="contactName" required>
                            <div class="form-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="contactEmail" class="required">Contact Email</label>
                            <input type="email" id="contactEmail" name="contactEmail" required>
                            <div class="form-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="contactPhone" class="required">Contact Phone</label>
                            <input type="tel" id="contactPhone" name="contactPhone" required>
                            <div class="form-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="contactTitle">Job Title</label>
                            <input type="text" id="contactTitle" name="contactTitle">
                            <div class="form-error"></div>
                        </div>
                    </div>

                    <h3 style="color: #2c3e50; margin: 2rem 0 1rem 0;">Billing Information</h3>
                    <div class="form-group">
                        <label for="billingAddress" class="required">Billing Address</label>
                        <textarea id="billingAddress" name="billingAddress" rows="3" required></textarea>
                        <div class="form-error"></div>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="billingEmail" class="required">Billing Email</label>
                            <input type="email" id="billingEmail" name="billingEmail" required>
                            <div class="form-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="billingPhone">Billing Phone</label>
                            <input type="tel" id="billingPhone" name="billingPhone">
                            <div class="form-error"></div>
                        </div>
                    </div>

                    <h3 style="color: #2c3e50; margin: 2rem 0 1rem 0;">Domain Settings</h3>
                    <div class="form-group">
                        <label for="primaryDomain" class="required">Primary Domain</label>
                        <input type="text" id="primaryDomain" name="primaryDomain" placeholder="company.com" required>
                        <div class="form-hint">Enter your company's primary email domain (without @)</div>
                        <div class="form-error"></div>
                    </div>
                    <div class="form-group">
                        <label for="additionalDomain">Additional Domains</label>
                        <div style="display: flex; gap: 0.5rem;">
                            <input type="text" id="additionalDomain" placeholder="Additional domain (optional)">
                            <button type="button" id="addDomainBtn" class="btn btn-outline" style="padding: 0.5rem 1rem;">Add</button>
                        </div>
                        <div id="domainList" class="domain-list"></div>
                    </div>
                </form>
            </div>

            <!-- Step 4: Admin Account Creation -->
            <div class="wizard-step" id="step4">
                <div class="step-content-header">
                    <h2>Create Admin Account</h2>
                    <p>Set up your company administrator account</p>
                </div>

                <form id="adminAccountForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="adminName" class="required">Full Name</label>
                            <input type="text" id="adminName" name="adminName" required>
                            <div class="form-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="adminEmail" class="required">Email Address</label>
                            <input type="email" id="adminEmail" name="adminEmail" required>
                            <div class="form-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="adminPhone">Phone Number</label>
                            <input type="tel" id="adminPhone" name="adminPhone">
                            <div class="form-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="adminRole" class="required">Role</label>
                            <select id="adminRole" name="adminRole" required>
                                <option value="">Select Role</option>
                                <option value="administrator" selected>ðŸ‘‘ Administrator</option>
                            </select>
                            <div class="form-hint">Administrator role provides full system access and cannot be modified</div>
                            <div class="form-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="adminPassword" class="required">Password</label>
                            <input type="password" id="adminPassword" name="adminPassword" required>
                            <div class="form-hint">Minimum 8 characters with uppercase, lowercase, numbers, and special characters</div>
                            <div class="form-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="confirmPassword" class="required">Confirm Password</label>
                            <input type="password" id="confirmPassword" name="confirmPassword" required>
                            <div class="form-error"></div>
                        </div>
                    </div>

                    <div class="form-group" style="margin-top: 1.5rem;">
                        <label style="display: flex; align-items: flex-start; gap: 0.5rem; font-weight: normal; text-align: left;">
                            <input type="checkbox" id="termsAccepted" required>
                            I agree to the <a href="#" style="color: #667eea;">Terms of Service</a> and <a href="#" style="color: #667eea;">Privacy Policy</a>
                        </label>
                        <div class="form-error"></div>
                    </div>
                </form>
            </div>

            <!-- Step 5: Completion -->
            <div class="wizard-step" id="step5">
                <div class="completion-content">
                    <div class="completion-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="completion-title">Registration Complete!</div>
                    <div class="completion-description">
                        Your company has been successfully registered and your management system is ready to use.
                        You will receive a confirmation email with login instructions and next steps.
                    </div>
                    
                    <div style="background: #f8f9fa; border-radius: 8px; padding: 1.5rem; margin: 2rem 0; text-align: left;">
                        <h4 style="margin-top: 0; color: #2c3e50;">What's Next:</h4>
                        <ul style="color: #6c757d; line-height: 1.6;">
                            <li>Check your email for account verification</li>
                            <li>Set up your team members and roles</li>
                            <li>Configure your system settings</li>
                            <li>Import existing data if needed</li>
                            <li>Schedule a demo call with our support team</li>
                        </ul>
                    </div>

                    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                        <a href="dashboard.html" class="btn btn-primary">
                            <i class="fas fa-tachometer-alt"></i>
                            Go to Dashboard
                        </a>
                        <a href="#" class="btn btn-outline" id="downloadSetupGuide">
                            <i class="fas fa-download"></i>
                            Download Setup Guide
                        </a>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="wizard-navigation">
                <button type="button" id="prevBtn" class="btn btn-secondary" style="display: none;">
                    <i class="fas fa-arrow-left"></i>
                    Previous
                </button>
                <div></div>
                <button type="button" id="nextBtn" class="btn btn-primary">
                    Next
                    <i class="fas fa-arrow-right"></i>
                </button>
                <button type="button" id="finishBtn" class="btn btn-primary" style="display: none;">
                    <span class="loading" style="display: none;">
                        <div class="spinner"></div>
                        Processing...
                    </span>
                    <span class="normal-text">
                        Complete Registration
                        <i class="fas fa-check"></i>
                    </span>
                </button>
            </div>
        </div>
    </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="max-w-6xl mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <div>
                    <div class="flex items-center mb-4">
                        <i class="fas fa-chart-line text-2xl text-primary-400 mr-2"></i>
                        <h4 class="text-xl font-bold">Dreamex DataLab</h4>
                    </div>
                    <p class="text-gray-400 mb-4">Smart solutions for effective and compliant HSE management.</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition">
                            <i class="fab fa-linkedin"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition">
                            <i class="fab fa-facebook"></i>
                        </a>
                    </div>
                </div>
                <div>
                    <h5 class="text-lg font-semibold mb-4">Solutions</h5>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Risk Management</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Compliance</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Environmental Monitoring</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Training & Awareness</a></li>
                    </ul>
                </div>
                <div>
                    <h5 class="text-lg font-semibold mb-4">Resources</h5>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Blog</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Webinars</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Documentation</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Case Studies</a></li>
                    </ul>
                </div>
                <div>
                    <h5 class="text-lg font-semibold mb-4">Legal</h5>
                    <ul class="space-y-2">
                        <li><a href="terms-of-service.html" class="text-gray-400 hover:text-white transition">Terms of Service</a></li>
                        <li><a href="privacy-policy.html" class="text-gray-400 hover:text-white transition">Privacy Policy</a></li>
                        <li><a href="legal-notice.html" class="text-gray-400 hover:text-white transition">Legal Notice</a></li>
                        <li><a href="cookies.html" class="text-gray-400 hover:text-white transition">Cookies</a></li>
                    </ul>
                </div>
            </div>
            <div class="pt-8 mt-8 border-t border-gray-800 text-center text-gray-400">
                <p>&copy; 2025 Dreamex DataLab. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Firebase and JavaScript -->
    <script type="module" src="js/firebase-config.js"></script>
    <script type="module" src="js/company-complete-registration.js"></script>
    
    <!-- Platform Features Loading Script -->
    <script>
        // Platform Features Management for Company Registration
        let availableFeatures = [];
        let selectedFeatures = [];

        // Firebase Configuration (inline for compatibility)
        const firebaseConfig = {
            apiKey: "AIzaSyDkEWtZqc4Nt8z0WOJxqx9RgwOjRoHdyW8",
            authDomain: "users-8be65.firebaseapp.com",
            databaseURL: "https://users-8be65-default-rtdb.firebaseio.com",
            projectId: "users-8be65",
            storageBucket: "users-8be65.appspot.com",
            messagingSenderId: "381062107093",
            appId: "1:381062107093:web:4987f68d8b3448e3c2a571",
            measurementId: "G-WY22K3Z2R6"
        };

        // Initialize Firebase if not already initialized
        if (!window.firebase || !window.firebase.apps || !window.firebase.apps.length) {
            // Import Firebase v8 SDK
            const script1 = document.createElement('script');
            script1.src = 'https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js';
            script1.onload = function() {
                const script2 = document.createElement('script');
                script2.src = 'https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js';
                script2.onload = function() {
                    firebase.initializeApp(firebaseConfig);
                    loadPlatformFeatures();
                };
                document.head.appendChild(script2);
            };
            document.head.appendChild(script1);
        } else {
            // Firebase already loaded, load features
            setTimeout(loadPlatformFeatures, 500);
        }

        // Load platform features from Firebase
        async function loadPlatformFeatures() {
            try {
                // Show loading state
                document.getElementById('featuresLoadingState').style.display = 'block';
                document.getElementById('platformFeaturesGrid').style.display = 'none';
                document.getElementById('featuresEmptyState').style.display = 'none';

                if (typeof firebase === 'undefined' || !firebase.database) {
                    console.warn('Firebase database not available, using fallback features');
                    showFallbackFeatures();
                    return;
                }

                const database = firebase.database();
                const featuresRef = database.ref('platformFeatures');
                
                const snapshot = await featuresRef.once('value');
                const featuresData = snapshot.val();

                if (featuresData) {
                    // Convert Firebase object to array and filter active features
                    availableFeatures = Object.keys(featuresData)
                        .map(key => ({ id: key, ...featuresData[key] }))
                        .filter(feature => feature.status === 'active' || !feature.status);
                    
                    if (availableFeatures.length > 0) {
                        displayPlatformFeatures();
                    } else {
                        showFeaturesEmptyState();
                    }
                } else {
                    console.warn('No platform features found in Firebase, using fallback');
                    showFallbackFeatures();
                }
            } catch (error) {
                console.error('Error loading platform features:', error);
                showFallbackFeatures();
            }
        }

        // Display platform features in the grid
        function displayPlatformFeatures() {
            const featuresGrid = document.getElementById('platformFeaturesGrid');
            const loadingState = document.getElementById('featuresLoadingState');
            const emptyState = document.getElementById('featuresEmptyState');

            // Hide loading and empty states
            loadingState.style.display = 'none';
            emptyState.style.display = 'none';

            // Generate feature cards HTML
            const featuresHTML = availableFeatures.map(feature => createRegistrationFeatureCard(feature)).join('');
            featuresGrid.innerHTML = featuresHTML;
            
            // Show the grid
            featuresGrid.style.display = 'grid';

            // Attach event listeners for feature selection
            attachFeatureSelectionListeners();
        }

        // Create individual feature card HTML for registration
        function createRegistrationFeatureCard(feature) {
            const iconClass = feature.icon || 'fas fa-puzzle-piece';
            const price = parseFloat(feature.price || 0);
            
            return `
                <div class="feature-card module-card" data-feature="${feature.id}" data-price="${price}">
                    <div class="feature-icon">
                        <i class="${iconClass}"></i>
                    </div>
                    <div class="feature-title">${feature.name || 'Unknown Feature'}</div>
                    <div class="feature-description">
                        ${feature.description || 'Feature description not available'}
                    </div>
                    ${price > 0 ? `<div class="feature-price">$${price.toFixed(2)}/user/month</div>` : '<div class="feature-price">Included</div>'}
                    ${feature.category ? `<div class="feature-category">${feature.category}</div>` : ''}
                </div>
            `;
        }

        // Attach event listeners for feature selection
        function attachFeatureSelectionListeners() {
            const moduleCards = document.querySelectorAll('.module-card');
            
            moduleCards.forEach(card => {
                card.addEventListener('click', function() {
                    const featureId = this.getAttribute('data-feature');
                    const featurePrice = parseFloat(this.getAttribute('data-price') || 0);
                    
                    if (this.classList.contains('selected')) {
                        // Deselect feature
                        this.classList.remove('selected');
                        selectedFeatures = selectedFeatures.filter(f => f.id !== featureId);
                        
                        // Update the external class's selectedFeatures Set
                        if (window.companyRegistration) {
                            window.companyRegistration.selectedFeatures.delete(featureId);
                        }
                    } else {
                        // Select feature
                        this.classList.add('selected');
                        const feature = availableFeatures.find(f => f.id === featureId);
                        if (feature) {
                            selectedFeatures.push(feature);
                            
                            // Update the external class's selectedFeatures Set
                            if (window.companyRegistration) {
                                window.companyRegistration.selectedFeatures.add(featureId);
                            }
                        }
                    }
                    
                    updateFeatureSelectionSummary();
                });
            });
        }

        // Update the feature selection summary
        function updateFeatureSelectionSummary() {
            const summaryDiv = document.getElementById('featureSelectionSummary');
            const countSpan = document.getElementById('selectedFeaturesCount');
            const listDiv = document.getElementById('selectedFeaturesList');
            const totalPriceDiv = document.getElementById('totalPrice');
            const pricingSection = document.getElementById('pricingSection');

            if (selectedFeatures.length > 0) {
                summaryDiv.style.display = 'block';
                countSpan.textContent = selectedFeatures.length;
                
                // Update features list
                const featureNames = selectedFeatures.map(f => f.name || 'Unknown Feature').join(', ');
                listDiv.textContent = featureNames;
                
                // Calculate total price
                const totalPrice = selectedFeatures.reduce((sum, f) => sum + (parseFloat(f.price) || 0), 0);
                totalPriceDiv.textContent = `Total: $${totalPrice.toFixed(2)}/user/month`;
                
                // Enable pricing section when features are selected
                pricingSection.style.opacity = '1';
                pricingSection.style.pointerEvents = 'auto';
                pricingSection.querySelector('p').textContent = 'Select your preferred plan based on your company size and needs';
                
                // Update enterprise plan price with selected features
                const enterprisePriceBase = 25;
                const featuresTotalPrice = totalPrice;
                const newEnterprisePrice = enterprisePriceBase + featuresTotalPrice;
                
                document.getElementById('enterprisePrice').innerHTML = `$${newEnterprisePrice.toFixed(2)}<span style="font-size: 1rem; font-weight: normal;">/user/month</span>`;
                
                // Update the wizard's next button state
                updateWizardNavigation();
            } else {
                summaryDiv.style.display = 'none';
                
                // Disable pricing section when no features are selected
                pricingSection.style.opacity = '0.5';
                pricingSection.style.pointerEvents = 'none';
                pricingSection.querySelector('p').textContent = 'Select features above to view pricing options';
                
                // Reset enterprise price
                document.getElementById('enterprisePrice').innerHTML = `$25<span style="font-size: 1rem; font-weight: normal;">/user/month</span>`;
                
                updateWizardNavigation();
            }
        }

        // Update wizard navigation based on feature selection
        function updateWizardNavigation() {
            const nextBtn = document.getElementById('nextBtn');
            const prevBtn = document.getElementById('prevBtn');
            
            if (nextBtn) {
                if (selectedFeatures.length > 0) {
                    nextBtn.disabled = false;
                    nextBtn.style.opacity = '1';
                    nextBtn.style.cursor = 'pointer';
                } else {
                    nextBtn.disabled = true;
                    nextBtn.style.opacity = '0.5';
                    nextBtn.style.cursor = 'not-allowed';
                }
            }
        }

        // Show empty state when no features are available
        function showFeaturesEmptyState() {
            document.getElementById('featuresLoadingState').style.display = 'none';
            document.getElementById('platformFeaturesGrid').style.display = 'none';
            document.getElementById('featuresEmptyState').style.display = 'block';
        }

        // Fallback features in case Firebase is not available
        function showFallbackFeatures() {
            const fallbackFeatures = [
                {
                    id: 'hse-fallback',
                    name: 'HSE',
                    description: 'Health, Safety & Environment management with incident tracking and risk assessments',
                    icon: 'fas fa-shield-alt',
                    category: 'Safety',
                    price: 0,
                    status: 'active'
                },
                {
                    id: 'hr-fallback',
                    name: 'Human Capital',
                    description: 'HR management, recruitment, training, and employee development',
                    icon: 'fas fa-users',
                    category: 'HR',
                    price: 0,
                    status: 'active'
                },
                {
                    id: 'logistics-fallback',
                    name: 'Logistics',
                    description: 'Supply chain management, inventory tracking, and fleet management',
                    icon: 'fas fa-truck',
                    category: 'Operations',
                    price: 0,
                    status: 'active'
                }
            ];

            availableFeatures = fallbackFeatures;
            displayPlatformFeatures();
        }

        // Make selected features available globally for form submission
        window.getSelectedFeatures = function() {
            return selectedFeatures;
        };

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Small delay to ensure other scripts are loaded
            setTimeout(() => {
                if (typeof firebase !== 'undefined' && firebase.database) {
                    loadPlatformFeatures();
                }
                
                // Ensure the external class is available
                if (window.companyRegistration) {
                    console.log('Company registration class is available');
                } else {
                    console.warn('Company registration class not found, some features may not work properly');
                }
            }, 1000);
            
            // Set up plan selection event listeners
            setupPlanSelectionListeners();
            
            // Set up user count input listener
            setupUserCountListener();
        });

        // Set up plan selection event listeners
        function setupPlanSelectionListeners() {
            const planCards = document.querySelectorAll('.plan-card');
            const userCountSection = document.getElementById('userCountSection');
            
            planCards.forEach(card => {
                card.addEventListener('click', function() {
                    // Only allow selection if pricing section is enabled
                    const pricingSection = document.getElementById('pricingSection');
                    if (pricingSection.style.pointerEvents === 'none') {
                        return;
                    }
                    
                    // Remove selected class from all cards
                    planCards.forEach(c => c.classList.remove('selected'));
                    
                    // Add selected class to clicked card
                    this.classList.add('selected');
                    
                    const planType = this.getAttribute('data-plan');
                    
                    if (planType === 'enterprise') {
                        // Show user count section for enterprise plan
                        userCountSection.style.display = 'block';
                        updateTotalPrice();
                    } else {
                        // Hide user count section for free trial
                        userCountSection.style.display = 'none';
                    }
                });
            });
        }

        // Set up user count input listener
        function setupUserCountListener() {
            const userCountInput = document.getElementById('userCount');
            
            userCountInput.addEventListener('input', updateTotalPrice);
            userCountInput.addEventListener('change', updateTotalPrice);
        }

        // Update total price calculation
        function updateTotalPrice() {
            const selectedPlan = document.querySelector('.plan-card.selected');
            const userCountInput = document.getElementById('userCount');
            const totalPriceDisplay = document.getElementById('totalPriceDisplay');
            const priceBreakdownDisplay = document.getElementById('priceBreakdownDisplay');
            
            if (!selectedPlan || selectedPlan.getAttribute('data-plan') !== 'enterprise') {
                return;
            }
            
            const userCount = parseInt(userCountInput.value) || 1;
            const featuresTotal = selectedFeatures.reduce((sum, f) => sum + (parseFloat(f.price) || 0), 0);
            const basePricePerUser = 25;
            const totalPricePerUser = basePricePerUser + featuresTotal;
            const monthlyTotal = totalPricePerUser * userCount;
            
            totalPriceDisplay.textContent = `Total: $${monthlyTotal.toFixed(2)}/month`;
            priceBreakdownDisplay.textContent = `${userCount} users Ã— $${totalPricePerUser.toFixed(2)}/user = $${monthlyTotal.toFixed(2)}/month`;
        }
    </script>
    
    <script>
        // User login status check (matching index.html functionality)
        function checkLoginStatus() {
            const user = JSON.parse(localStorage.getItem('user'));
            
            if (user) {
                // User is logged in
                document.getElementById('username').textContent = user.name;
                document.getElementById('userStatus').classList.remove('hidden');
                document.getElementById('userStatus').classList.add('flex');
                document.getElementById('loginButton').classList.add('hidden');
                document.getElementById('logoutButton').classList.remove('hidden');
            } else {
                // User is not logged in
                document.getElementById('userStatus').classList.add('hidden');
                document.getElementById('userStatus').classList.remove('flex');
                document.getElementById('loginButton').classList.remove('hidden');
                document.getElementById('logoutButton').classList.add('hidden');
            }
        }
        
        // Handle logout
        function handleLogout() {
            localStorage.removeItem('user');
            checkLoginStatus();
        }
        
        // Set up logout button listener
        document.getElementById('logoutButton').addEventListener('click', handleLogout);
        
        // Check login status when page loads
        document.addEventListener('DOMContentLoaded', checkLoginStatus);
    </script>
    <script>
        // Populate the Country dropdown with a full ISO country list
        function populateCountryDropdown() {
            const select = document.getElementById('country');
            if (!select) return;

            // Full list of countries (ISO 3166-1 alpha-2)
            const countries = [
                { code: 'AF', name: 'Afghanistan' },
                { code: 'AL', name: 'Albania' },
                { code: 'DZ', name: 'Algeria' },
                { code: 'AD', name: 'Andorra' },
                { code: 'AO', name: 'Angola' },
                { code: 'AG', name: 'Antigua and Barbuda' },
                { code: 'AR', name: 'Argentina' },
                { code: 'AM', name: 'Armenia' },
                { code: 'AU', name: 'Australia' },
                { code: 'AT', name: 'Austria' },
                { code: 'AZ', name: 'Azerbaijan' },
                { code: 'BS', name: 'Bahamas' },
                { code: 'BH', name: 'Bahrain' },
                { code: 'BD', name: 'Bangladesh' },
                { code: 'BB', name: 'Barbados' },
                { code: 'BY', name: 'Belarus' },
                { code: 'BE', name: 'Belgium' },
                { code: 'BZ', name: 'Belize' },
                { code: 'BJ', name: 'Benin' },
                { code: 'BT', name: 'Bhutan' },
                { code: 'BO', name: 'Bolivia' },
                { code: 'BA', name: 'Bosnia and Herzegovina' },
                { code: 'BW', name: 'Botswana' },
                { code: 'BR', name: 'Brazil' },
                { code: 'BN', name: 'Brunei' },
                { code: 'BG', name: 'Bulgaria' },
                { code: 'BF', name: 'Burkina Faso' },
                { code: 'BI', name: 'Burundi' },
                { code: 'CV', name: 'Cabo Verde' },
                { code: 'KH', name: 'Cambodia' },
                { code: 'CM', name: 'Cameroon' },
                { code: 'CA', name: 'Canada' },
                { code: 'CF', name: 'Central African Republic' },
                { code: 'TD', name: 'Chad' },
                { code: 'CL', name: 'Chile' },
                { code: 'CN', name: 'China' },
                { code: 'CO', name: 'Colombia' },
                { code: 'KM', name: 'Comoros' },
                { code: 'CG', name: 'Congo (Congo-Brazzaville)' },
                { code: 'CR', name: 'Costa Rica' },
                { code: 'CI', name: 'CÃ´te dâ€™Ivoire' },
                { code: 'HR', name: 'Croatia' },
                { code: 'CU', name: 'Cuba' },
                { code: 'CY', name: 'Cyprus' },
                { code: 'CZ', name: 'Czechia' },
                { code: 'CD', name: 'Democratic Republic of the Congo' },
                { code: 'DK', name: 'Denmark' },
                { code: 'DJ', name: 'Djibouti' },
                { code: 'DM', name: 'Dominica' },
                { code: 'DO', name: 'Dominican Republic' },
                { code: 'EC', name: 'Ecuador' },
                { code: 'EG', name: 'Egypt' },
                { code: 'SV', name: 'El Salvador' },
                { code: 'GQ', name: 'Equatorial Guinea' },
                { code: 'ER', name: 'Eritrea' },
                { code: 'EE', name: 'Estonia' },
                { code: 'SZ', name: 'Eswatini' },
                { code: 'ET', name: 'Ethiopia' },
                { code: 'FJ', name: 'Fiji' },
                { code: 'FI', name: 'Finland' },
                { code: 'FR', name: 'France' },
                { code: 'GA', name: 'Gabon' },
                { code: 'GM', name: 'Gambia' },
                { code: 'GE', name: 'Georgia' },
                { code: 'DE', name: 'Germany' },
                { code: 'GH', name: 'Ghana' },
                { code: 'GR', name: 'Greece' },
                { code: 'GD', name: 'Grenada' },
                { code: 'GT', name: 'Guatemala' },
                { code: 'GN', name: 'Guinea' },
                { code: 'GW', name: 'Guinea-Bissau' },
                { code: 'GY', name: 'Guyana' },
                { code: 'HT', name: 'Haiti' },
                { code: 'HN', name: 'Honduras' },
                { code: 'HU', name: 'Hungary' },
                { code: 'IS', name: 'Iceland' },
                { code: 'IN', name: 'India' },
                { code: 'ID', name: 'Indonesia' },
                { code: 'IR', name: 'Iran' },
                { code: 'IQ', name: 'Iraq' },
                { code: 'IE', name: 'Ireland' },
                { code: 'IL', name: 'Israel' },
                { code: 'IT', name: 'Italy' },
                { code: 'JM', name: 'Jamaica' },
                { code: 'JP', name: 'Japan' },
                { code: 'JO', name: 'Jordan' },
                { code: 'KZ', name: 'Kazakhstan' },
                { code: 'KE', name: 'Kenya' },
                { code: 'KI', name: 'Kiribati' },
                { code: 'KW', name: 'Kuwait' },
                { code: 'KG', name: 'Kyrgyzstan' },
                { code: 'LA', name: 'Laos' },
                { code: 'LV', name: 'Latvia' },
                { code: 'LB', name: 'Lebanon' },
                { code: 'LS', name: 'Lesotho' },
                { code: 'LR', name: 'Liberia' },
                { code: 'LY', name: 'Libya' },
                { code: 'LI', name: 'Liechtenstein' },
                { code: 'LT', name: 'Lithuania' },
                { code: 'LU', name: 'Luxembourg' },
                { code: 'MG', name: 'Madagascar' },
                { code: 'MW', name: 'Malawi' },
                { code: 'MY', name: 'Malaysia' },
                { code: 'MV', name: 'Maldives' },
                { code: 'ML', name: 'Mali' },
                { code: 'MT', name: 'Malta' },
                { code: 'MH', name: 'Marshall Islands' },
                { code: 'MR', name: 'Mauritania' },
                { code: 'MU', name: 'Mauritius' },
                { code: 'MX', name: 'Mexico' },
                { code: 'FM', name: 'Micronesia' },
                { code: 'MD', name: 'Moldova' },
                { code: 'MC', name: 'Monaco' },
                { code: 'MN', name: 'Mongolia' },
                { code: 'ME', name: 'Montenegro' },
                { code: 'MA', name: 'Morocco' },
                { code: 'MZ', name: 'Mozambique' },
                { code: 'MM', name: 'Myanmar' },
                { code: 'NA', name: 'Namibia' },
                { code: 'NR', name: 'Nauru' },
                { code: 'NP', name: 'Nepal' },
                { code: 'NL', name: 'Netherlands' },
                { code: 'NZ', name: 'New Zealand' },
                { code: 'NI', name: 'Nicaragua' },
                { code: 'NE', name: 'Niger' },
                { code: 'NG', name: 'Nigeria' },
                { code: 'KP', name: 'North Korea' },
                { code: 'MK', name: 'North Macedonia' },
                { code: 'NO', name: 'Norway' },
                { code: 'OM', name: 'Oman' },
                { code: 'PK', name: 'Pakistan' },
                { code: 'PW', name: 'Palau' },
                { code: 'PS', name: 'Palestine, State of' },
                { code: 'PA', name: 'Panama' },
                { code: 'PG', name: 'Papua New Guinea' },
                { code: 'PY', name: 'Paraguay' },
                { code: 'PE', name: 'Peru' },
                { code: 'PH', name: 'Philippines' },
                { code: 'PL', name: 'Poland' },
                { code: 'PT', name: 'Portugal' },
                { code: 'QA', name: 'Qatar' },
                { code: 'RO', name: 'Romania' },
                { code: 'RU', name: 'Russia' },
                { code: 'RW', name: 'Rwanda' },
                { code: 'KN', name: 'Saint Kitts and Nevis' },
                { code: 'LC', name: 'Saint Lucia' },
                { code: 'VC', name: 'Saint Vincent and the Grenadines' },
                { code: 'WS', name: 'Samoa' },
                { code: 'SM', name: 'San Marino' },
                { code: 'ST', name: 'Sao Tome and Principe' },
                { code: 'SA', name: 'Saudi Arabia' },
                { code: 'SN', name: 'Senegal' },
                { code: 'RS', name: 'Serbia' },
                { code: 'SC', name: 'Seychelles' },
                { code: 'SL', name: 'Sierra Leone' },
                { code: 'SG', name: 'Singapore' },
                { code: 'SK', name: 'Slovakia' },
                { code: 'SI', name: 'Slovenia' },
                { code: 'SB', name: 'Solomon Islands' },
                { code: 'SO', name: 'Somalia' },
                { code: 'ZA', name: 'South Africa' },
                { code: 'KR', name: 'South Korea' },
                { code: 'SS', name: 'South Sudan' },
                { code: 'ES', name: 'Spain' },
                { code: 'LK', name: 'Sri Lanka' },
                { code: 'SD', name: 'Sudan' },
                { code: 'SR', name: 'Suriname' },
                { code: 'SE', name: 'Sweden' },
                { code: 'CH', name: 'Switzerland' },
                { code: 'SY', name: 'Syria' },
                { code: 'TJ', name: 'Tajikistan' },
                { code: 'TZ', name: 'Tanzania' },
                { code: 'TH', name: 'Thailand' },
                { code: 'TL', name: 'Timor-Leste' },
                { code: 'TG', name: 'Togo' },
                { code: 'TO', name: 'Tonga' },
                { code: 'TT', name: 'Trinidad and Tobago' },
                { code: 'TN', name: 'Tunisia' },
                { code: 'TR', name: 'Turkey' },
                { code: 'TM', name: 'Turkmenistan' },
                { code: 'TV', name: 'Tuvalu' },
                { code: 'UG', name: 'Uganda' },
                { code: 'UA', name: 'Ukraine' },
                { code: 'AE', name: 'United Arab Emirates' },
                { code: 'GB', name: 'United Kingdom' },
                { code: 'US', name: 'United States' },
                { code: 'UY', name: 'Uruguay' },
                { code: 'UZ', name: 'Uzbekistan' },
                { code: 'VU', name: 'Vanuatu' },
                { code: 'VA', name: 'Vatican City' },
                { code: 'VE', name: 'Venezuela' },
                { code: 'VN', name: 'Vietnam' },
                { code: 'YE', name: 'Yemen' },
                { code: 'ZM', name: 'Zambia' },
                { code: 'ZW', name: 'Zimbabwe' }
            ];

            // Reset existing options
            select.innerHTML = '';

            // Placeholder option
            const placeholder = document.createElement('option');
            placeholder.value = '';
            placeholder.textContent = 'Select Country';
            placeholder.selected = true;
            select.appendChild(placeholder);

            // Add countries
            for (const c of countries) {
                const opt = document.createElement('option');
                opt.value = c.code;
                opt.textContent = c.name;
                select.appendChild(opt);
            }

            // Optional Other option
            const otherOpt = document.createElement('option');
            otherOpt.value = 'OTHER';
            otherOpt.textContent = 'Other';
            select.appendChild(otherOpt);
        }

        document.addEventListener('DOMContentLoaded', populateCountryDropdown);
    </script>
    <script>
        // Redirect to dashboard when the Complete Registration button is clicked
        function wireFinishRedirect() {
            const finishBtn = document.getElementById('finishBtn');
            if (!finishBtn) return;
            finishBtn.addEventListener('click', function () {
                window.location.href = 'dashboard.html';
            });
        }
        document.addEventListener('DOMContentLoaded', wireFinishRedirect);
    </script>
</body>
</html>

