{
  "apps": [{
    "name": "dreamex-email-service",
    "script": "email-server-production.js",
    "instances": 1,
    "exec_mode": "fork",
    "env": {
      "NODE_ENV": "production",
      "PORT": 3001,
      "HOST": "0.0.0.0",
      "API_KEY": "dreemex_hse_email_service_2025",
      "ENABLE_EMAIL_LOGGING": "true",
      "EMAIL_RATE_LIMIT": "200",
      "HEALTH_CHECK_INTERVAL": "300000",
      "ENABLE_METRICS": "true",
      "RETRY_ATTEMPTS": "5",
      "RETRY_DELAY": "3000",
      "KEEP_ALIVE_TIMEOUT": "65000",
      "HEADERS_TIMEOUT": "66000"
    },
    "env_production": {
      "NODE_ENV": "production",
      "PORT": 3001,
      "HOST": "0.0.0.0",
      "API_KEY": "dreemex_hse_email_service_2025",
      "ENABLE_EMAIL_LOGGING": "true",
      "EMAIL_RATE_LIMIT": "200",
      "HEALTH_CHECK_INTERVAL": "300000",
      "ENABLE_METRICS": "true",
      "RETRY_ATTEMPTS": "5",
      "RETRY_DELAY": "3000",
      "KEEP_ALIVE_TIMEOUT": "65000",
      "HEADERS_TIMEOUT": "66000"
    },
    "max_memory_restart": "2G",
    "min_uptime": "10s",
    "max_restarts": 1000,
    "restart_delay": 2000,
    "autorestart": true,
    "watch": false,
    "ignore_watch": ["node_modules", "logs", ".env", "*.log"],
    "log_file": "./logs/combined.log",
    "out_file": "./logs/out.log",
    "error_file": "./logs/error.log",
    "log_date_format": "YYYY-MM-DD HH:mm:ss Z",
    "merge_logs": true,
    "kill_timeout": 5000,
    "wait_ready": true,
    "listen_timeout": 10000,
    "shutdown_with_message": true,
    "time": true,
    "node_args": [
      "--max-old-space-size=2048",
      "--expose-gc"
    ],
    "exp_backoff_restart_delay": 100,
    "max_backoff_restart_delay": 30000
  }]
}
